<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCRL News & Articles | American Stock Car Racing League</title>
    <style>
        body { margin: 0; font-family: 'Georgia', serif; background: #000; color: #fff; line-height: 1.8; overflow-x: hidden; }
        /* Hamburger Button */
        .hamburger { position: fixed; top: 1rem; left: 1rem; z-index: 1002; cursor: pointer; padding: 10px; background: rgba(0,0,0,0.8); border-radius: 8px; }
        .hamburger-line { width: 30px; height: 4px; background: #ff0; margin: 6px 0; transition: 0.4s; border-radius: 2px; }
        /* Overlay Menu */
        .nav-overlay { position: fixed; top: 0; left: -100%; width: 80%; max-width: 300px; height: 100vh; background: rgba(0,0,0,0.95); transition: left 0.4s ease; z-index: 1001; padding-top: 80px; box-shadow: 5px 0 15px rgba(200,0,0,0.8); overflow-y: auto; }
        .nav-overlay.open { left: 0; }
        .nav-logo { font-size: 2.5rem; color: #ff0; text-shadow: 3px 3px #c00; margin: 0 0 3rem 2rem; }
        .nav-links { display: flex; flex-direction: column; gap: 1rem; padding: 0 2rem; }
        .nav-links a { color: #fff; text-decoration: none; font-size: 1.5rem; padding: 1rem; border-radius: 10px; transition: 0.3s; text-align: left; }
        .nav-links a:hover { background: #c00; color: #ff0; }
        .hero { background: linear-gradient(to bottom, #c00, #900); padding: 10rem 1rem 6rem; text-align: center; margin-top: 60px; }
        h1 { font-size: 4rem; margin: 0; text-shadow: 4px 4px #000; }
        .container { max-width: 1200px; margin: 0 auto; padding: 3rem 1rem; }
        /* Carousel */
        .carousel { position: relative; overflow: hidden; border-radius: 15px; box-shadow: 0 8px 30px rgba(200,0,0,0.6); }
        .carousel-inner { display: flex; transition: transform 0.5s ease; width: 100%; }
        .carousel-item { min-width: 100%; box-sizing: border-box; padding: 3rem; background: #111; }
        .carousel-item h2 { font-size: 2.5rem; color: #ff0; text-shadow: 2px 2px #000; text-align: center; }
        .carousel-item img { max-width: 100%; border-radius: 15px; margin: 2rem auto; display: block; }
        .carousel-item p { text-align: center; font-size: 1.2rem; margin-bottom: 2rem; }
        .carousel-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.7); color: #ff0; font-size: 3rem; padding: 1rem; cursor: pointer; z-index: 10; border-radius: 50%; }
        .carousel-arrow.left { left: 20px; }
        .carousel-arrow.right { right: 20px; }
        .carousel-dots { text-align: center; margin: 2rem 0; }
        .dot { display: inline-block; width: 12px; height: 12px; background: #333; border-radius: 50%; margin: 0 8px; cursor: pointer; transition: 0.3s; }
        .dot.active { background: #ff0; }
        /* Page Flip Book Styles */
        .flipbook-container { width: 100%; max-width: 1000px; height: 650px; margin: 2rem auto; box-shadow: 0 0 30px rgba(200,0,0,0.8); border-radius: 10px; overflow: hidden; position: relative; background: #222; }
        .flipbook-container .loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ff0; font-size: 1.8rem; z-index: 5; background: rgba(0,0,0,0.7); padding: 1rem 2rem; border-radius: 10px; }
        .page { background: #fff; display: flex; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; }
        .page img { max-width: 100%; max-height: 100%; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
        footer { background: #111; padding: 2rem; text-align: center; font-size: 0.9rem; }
        @media (max-width: 768px) {
            .hamburger { top: 0.5rem; left: 0.5rem; }
            .carousel-arrow { font-size: 2.5rem; padding: 0.8rem; }
            .flipbook-container { height: 450px; }
        }
    </style>
    <!-- Correct StPageFlip CDN -->
    <script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>
</head>
<body>
    <!-- Hamburger Button -->
    <div class="hamburger" onclick="toggleMenu()">
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
    </div>
    <!-- Overlay Menu -->
    <div class="nav-overlay" id="nav-menu">
        <div class="nav-logo">ASCRL</div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="standings.html">Standings</a>
            <a href="results.html">Results</a>
            <a href="schedule.html">Schedule</a>
            <a href="drivers.html">Drivers</a>
            <a href="rules.html">Rules</a>
            <a href="news.html">News</a>
        </div>
    </div>
    <header class="hero">
        <h1>ASCRL NEWS & ARTICLES</h1>
        <p>Weekly Race Recaps ‚Ä¢ Driver Features ‚Ä¢ Championship Coverage</p>
    </header>
    <div class="container">
        <!-- Interactive Carousel -->
        <div class="carousel">
            <div class="carousel-arrow left" onclick="changeSlide(-1)">‚Äπ</div>
            <div class="carousel-arrow right" onclick="changeSlide(1)">‚Ä∫</div>
            <div class="carousel-inner" id="carousel-inner"></div>
            <div class="carousel-dots" id="carousel-dots"></div>
        </div>
    </div>
    <footer>
        ¬© 2025-2026 ASCRL | NASCAR-inspired journalism | Built for stock car racing passion
    </footer>
    <script>
        function toggleMenu() {
            document.getElementById('nav-menu').classList.toggle('open');
        }

        // Articles array ‚Äî newest first
        const articles = [
            {
                title: "ASCRL WEEKLY ‚Äî Happy Veterans Day!",
                date: "November 11, 2025",
                text: "<p>Happy Veterans Day to all who have served‚Äîthank you for your sacrifice and service. Go enjoy that well-deserved free meal and cold beer on us!</p>",
                images: [
                    "https://raw.githubusercontent.com/mattwilson20/ascrl-website/main/ASCRweeklyissue6.jpg",
                    "https://raw.githubusercontent.com/mattwilson20/ascrl-website/main/ASCRPage2.jpg"
                ],
                isFlipbook: true
            },
            {
                title: "Singular_Nacho Scores at Nashville ‚Äî 8th Different Winner in 8 Races!",
                date: "November 11, 2025",
                content: "<p>Incredible parity in the ASCRL! Singular_Nacho charged to the checkered flag at Nashville Superspeedway, becoming the eighth different winner in just eight races this season. This kind of wide-open competition is pure NASCAR magic‚Äîany driver, any week, can park it in Victory Lane!</p><img src='https://raw.githubusercontent.com/mattwilson20/ascrl-website/0a91dc765fb2ed87e57acdc2ec06585197ce0f30/ASCRweeklyissue5.jpg' alt='ASCRL Weekly Issue 5 ‚Äî Singular_Nacho Nashville Victory Cover'>"
            },
            {
                title: "ASCRL WEEKLY ‚Äî Dewshine the Hometown Favorite at Nashville",
                date: "November 10, 2025",
                content: "<p>Dewshine enters tonight's race as the clear favorite to win, but Hockey currently sits atop the championship leaderboard. And let's not forget Kevwood87, fresh off his thrilling victory in his very first ASCRL start just last night! Can Dewshine get it done in front of his passionate home-state fans? The line at his hauler stretched a mile long for autographs‚Äîpure NASCAR-style star power on display!</p><img src='https://raw.githubusercontent.com/mattwilson20/ascrl-website/7654906eeda55824349300cf0fe1b8cddf32f9c0/ASCRweeklyissue4.jpg' alt='ASCRL Weekly Issue 4 ‚Äî Dewshine Nashville Hometown Hype Cover'>"
            },
            {
                title: "kevwood87 Dominates Phoenix Preseason Opener in ASCRL Debut",
                date: "November 9, 2025",
                content: "<p>kevwood87 made his first career start with ASCRL and immediately showed the league he is a force to be reckoned with. The ARCA preseason opener at Phoenix saw some talented dirt guys cross over for a taste of asphalt racing, but it was kevwood87 who held off fan favorite Blazee on the white-flag lap to claim the victory. Congratulations to kevwood87 on the win and gracing the cover of this week's ASCRL Weekly newsletter!</p><img src='https://raw.githubusercontent.com/mattwilson20/ascrl-website/406d2c12bd729d7e5ad1133b1f2169d29db77069/ASCRweeklyissue3.jpg' alt='ASCRL Weekly Issue 3 ‚Äî kevwood87 Phoenix Victory Cover'>"
            },
            {
                title: "ASCRL WEEKLY ‚Äî Preseason Phoenix Opener",
                date: "November 9, 2025",
                content: "<p>Looking to be small field at Phoenix for the preseason opener!</p><img src='https://raw.githubusercontent.com/mattwilson20/ascrl-website/31611ef9897e38bb2880ce61e3717c660fd3941c/ASCRweeklyissue2.jpg' alt='ASCRL WEEKLY Issue 2 ‚Äî Preseason Phoenix Opener Hype'>"
            },
            {
                title: "BIG_FELLA Wins at Home ‚Äî Atlanta Thriller",
                date: "November 6, 2025",
                content: "<p>After a bumpy start and what felt like 100 laps under yellow, the racing really picked up in the second half. Multiple restarts kept the pack tight most of the race, and a last-second shove put BIG_FELLAx2220 first across the line in front of his hometown fans in Atlanta!</p><img src='https://raw.githubusercontent.com/mattwilson20/ascrl-website/main/big-fella-atlanta-win.jpg' alt='BIG_FELLA Atlanta Victory Burnout'>"
            }
        ];

        let currentSlide = 0;
        const carouselInner = document.getElementById('carousel-inner');
        const dotsContainer = document.getElementById('carousel-dots');
        let flipInstances = [];

        function renderCarousel() {
            carouselInner.innerHTML = '';
            dotsContainer.innerHTML = '';
            flipInstances.forEach(f => f.destroy());
            flipInstances = [];

            articles.forEach((article, index) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-item';

                let contentHTML = `
                    <h2>${article.title}</h2>
                    <p style="text-align:center; font-style:italic; color:#ccc;">${article.date}</p>
                `;

                if (article.isFlipbook) {
                    contentHTML += article.text + `
                        <div class="flipbook-container">
                            <div class="loading">Loading ASCRL Weekly Magazine... üèÅ</div>
                            <div id="flipbook-${index}">
                                ${article.images.map(src => `<div class="page"><img src="${src}" alt="ASCRL Weekly Page"></div>`).join('')}
                            </div>
                        </div>
                    `;
                } else {
                    contentHTML += `<div style="text-align:center;">${article.content || ''}</div>`;
                }

                slide.innerHTML = contentHTML;
                carouselInner.appendChild(slide);

                if (article.isFlipbook) {
                    setTimeout(() => {
                        const element = document.getElementById(`flipbook-${index}`);
                        if (element) {
                            try {
                                const flipbook = new St.PageFlip(element, {
                                    width: 500,
                                    height: 650,
                                    size: "stretch",
                                    minWidth: 315,
                                    maxWidth: 1000,
                                    minHeight: 420,
                                    maxHeight: 800,
                                    showCover: true,
                                    mobileScrollSupport: false,
                                    drawShadow: true,
                                    flippingTime: 1000,
                                    usePortrait: true,
                                    autoSize: true,
                                    maxShadowOpacity: 0.5
                                });
                                flipbook.loadFromHTML(element.querySelectorAll('.page'));
                                element.parentElement.querySelector('.loading').style.display = 'none';
                                flipInstances.push(flipbook);
                            } catch (e) {
                                console.error("Flipbook init failed:", e);
                                element.parentElement.querySelector('.loading').innerText = "Magazine preview (static images):";
                                // No fallback needed - images are already visible
                            }
                        }
                    }, 300);
                }

                const dot = document.createElement('span');
                dot.className = 'dot';
                dot.onclick = () => goToSlide(index);
                dotsContainer.appendChild(dot);
            });

            updateCarousel();
        }

        function updateCarousel() {
            carouselInner.style.transform = `translateX(-${currentSlide * 100}%)`;
            document.querySelectorAll('.dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
        }

        function changeSlide(n) {
            currentSlide = (currentSlide + n + articles.length) % articles.length;
            updateCarousel();
        }

        function goToSlide(n) {
            currentSlide = n;
            updateCarousel();
        }

        window.addEventListener('resize', () => {
            flipInstances.forEach(f => f.update());
        });

        renderCarousel();
    </script>
</body>
</html>
