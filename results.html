<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race Results | ASCRL</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .hero { 
            background: radial-gradient(circle at center, #222 0%, #000 100%); 
            padding: 10rem 1rem 5rem; 
            text-align: center; 
            border-bottom: 1px solid var(--border);
        }
        .container { max-width: 1000px; margin: 0 auto; padding: 4rem 1rem; }
        
        /* Dropdown Styling */
        .filter-section {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        select {
            background: #111;
            color: #fff;
            border: 1px solid var(--border);
            padding: 10px 20px;
            font-family: 'Arial Black', sans-serif;
            text-transform: uppercase;
            cursor: pointer;
        }

        table { width: 100%; border-collapse: collapse; background: #0d0d0d; border: 1px solid var(--border); }
        th { background: #111; padding: 1.2rem; text-align: left; font-size: 0.7rem; color: var(--primary); border-bottom: 1px solid var(--border); }
        td { padding: 1.2rem; border-bottom: 1px solid var(--border); font-family: sans-serif; }
        .win-row { background: rgba(255, 255, 0, 0.05); }
    </style>
</head>
<body>

    <div id="nav-placeholder"></div>

    <header class="hero">
        <p style="letter-spacing: 8px; color: var(--primary); text-transform: uppercase; font-size: 0.8rem;">Official Archive</p>
        <h1>RACE RESULTS</h1>
    </header>

    <main class="container">
        <div class="filter-section">
            <select id="series-select" onchange="updateResults()">
                <option value="Cup">Cup Series</option>
                <option value="Xfinity">Xfinity Series</option>
                <option value="Truck">Truck Series</option>
                <option value="Menards">Menards Series</option>
            </select>
        </div>

        <table id="results-table">
            <thead>
                <tr>
                    <th style="width: 50px;">POS</th>
                    <th>DRIVER</th>
                    <th>CAR #</th>
                    <th>LAPS</th>
                    <th>STATUS</th>
                </tr>
            </thead>
            <tbody id="results-body">
                </tbody>
        </table>
    </main>

    <script>
        // 1. Navigation Loader
        fetch('nav.html')
            .then(res => res.text())
            .then(data => { document.getElementById('nav-placeholder').innerHTML = data; });

        // 2. Data Fetching
        let allResults = {};

        fetch('results.json')
            .then(res => res.json())
            .then(data => {
                allResults = data;
                updateResults(); // Load default
            })
            .catch(err => console.error("Could not load results.json", err));

        function updateResults() {
            const series = document.getElementById('series-select').value;
            const body = document.getElementById('results-body');
            body.innerHTML = '';

            if (allResults[series]) {
                allResults[series].forEach((entry, index) => {
                    const isWinner = index === 0 ? 'class="win-row"' : '';
                    body.innerHTML += `
                        <tr ${isWinner}>
                            <td style="font-family: 'Arial Black'">${index + 1}</td>
                            <td style="font-weight: bold">${entry.driver}</td>
                            <td>#${entry.carNumber}</td>
                            <td>${entry.laps}</td>
                            <td style="color: ${entry.status === 'Running' ? '#0f0' : '#f00'}">${entry.status}</td>
                        </tr>
                    `;
                });
            }
        }
    </script>
</body>
</html>
